<!DOCTYPE html>
<html lang="en" dir="auto">

<head><meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<meta name="robots" content="index, follow">
<title>Jekyll to Hugo | Dev. note</title>
<meta name="keywords" content="">
<meta name="description" content="이 블로그는 정적 사이트 생성기를 사용하여 웹페이지를 생성하고, 이를 GitHub에 올려서 hosting하고 있습니다. 그 동안은 Jekyll 을 사용하여 페이지를 생성했는데, 이번에 Hugo로 바꿔봤습니다. 어떻게 바꿨는지, 무엇이 좋았는지를 정리해 봤습니다.
Why? Jekyll을 사용한 건 가장 유명한 정적 사이트 생성기이고 GitHub 에서 빌드를 해 주기 때문이었습니다. 적당한 theme 을 찾아 받고 그 위에 글을 올리고, 가끔 약간의 customize를 했습니다.
근데 사용하기가 조금 불편했습니다. 웹 지식이 부족해서인 것 같긴 하지만, 어떤 것이 생성 결과물인지, 내가 customize 하고자 하는 부분과 관련된 코드는 어디에 있는지 등을 찾기 어려웠습니다.">
<meta name="author" content="Huijeong Kim">
<link rel="canonical" href="http://huijeong-kim.github.io/post/2023-06-15-jekyll-to-hugo/">
<link crossorigin="anonymous" href="/assets/css/stylesheet.3613efbd0b1772781e8f49935e973cae632a7f61471c05b17be155505ccf87b5.css" integrity="sha256-NhPvvQsXcngej0mTXpc8rmMqf2FHHAWxe&#43;FVUFzPh7U=" rel="preload stylesheet" as="style">
<script defer crossorigin="anonymous" src="/assets/js/highlight.f413e19d0714851f6474e7ee9632408e58ac146fbdbe62747134bea2fa3415e0.js" integrity="sha256-9BPhnQcUhR9kdOfuljJAjlisFG&#43;9vmJ0cTS&#43;ovo0FeA="
    onload="hljs.initHighlightingOnLoad();"></script>
<link rel="icon" href="http://huijeong-kim.github.io/favicon.ico">
<link rel="icon" type="image/png" sizes="16x16" href="http://huijeong-kim.github.io/favicon-16x16.png">
<link rel="icon" type="image/png" sizes="32x32" href="http://huijeong-kim.github.io/favicon-32x32.png">
<link rel="apple-touch-icon" href="http://huijeong-kim.github.io/apple-touch-icon.png">
<link rel="mask-icon" href="http://huijeong-kim.github.io/safari-pinned-tab.svg">
<meta name="theme-color" content="#2e2e33">
<meta name="msapplication-TileColor" content="#2e2e33">
<noscript>
    <style>
        #theme-toggle,
        .top-link {
            display: none;
        }

    </style>
    <style>
        @media (prefers-color-scheme: dark) {
            :root {
                --theme: rgb(29, 30, 32);
                --entry: rgb(46, 46, 51);
                --primary: rgb(218, 218, 219);
                --secondary: rgb(155, 156, 157);
                --tertiary: rgb(65, 66, 68);
                --content: rgb(196, 196, 197);
                --hljs-bg: rgb(46, 46, 51);
                --code-bg: rgb(55, 56, 62);
                --border: rgb(51, 51, 51);
            }

            .list {
                background: var(--theme);
            }

            .list:not(.dark)::-webkit-scrollbar-track {
                background: 0 0;
            }

            .list:not(.dark)::-webkit-scrollbar-thumb {
                border-color: var(--theme);
            }
        }

    </style>
</noscript>


<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.16.4/dist/katex.min.css" crossorigin="anonymous">
<script defer src="https://cdn.jsdelivr.net/npm/katex@0.16.4/dist/katex.min.js" crossorigin="anonymous"></script>
<script defer src="https://cdn.jsdelivr.net/npm/katex@0.16.4/dist/contrib/auto-render.min.js" crossorigin="anonymous"
  onload="renderMathInElement(document.body, {
    delimiters: [
      {left: '$$', right: '$$', display: true},
      {left: '$', right: '$', display: false}
    ]
  });"></script>
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.16.9/dist/katex.min.css" integrity="sha384-n8MVd4RsNIU0tAv4ct0nTaAbDJwPJzDEaqSD1odI+WdtXRGWt2kTvGFasHpSy3SV" crossorigin="anonymous">
<script type="module">
    import renderMathInElement from "https://cdn.jsdelivr.net/npm/katex@0.16.9/dist/contrib/auto-render.mjs";
    renderMathInElement(document.body);
</script>

<script async src="https://www.googletagmanager.com/gtag/js?id=G-VHBQNPGKKB"></script>
<script>
var doNotTrack = false;
if (!doNotTrack) {
	window.dataLayer = window.dataLayer || [];
	function gtag(){dataLayer.push(arguments);}
	gtag('js', new Date());
	gtag('config', 'G-VHBQNPGKKB', { 'anonymize_ip': false });
}
</script>
<meta property="og:title" content="Jekyll to Hugo" />
<meta property="og:description" content="이 블로그는 정적 사이트 생성기를 사용하여 웹페이지를 생성하고, 이를 GitHub에 올려서 hosting하고 있습니다. 그 동안은 Jekyll 을 사용하여 페이지를 생성했는데, 이번에 Hugo로 바꿔봤습니다. 어떻게 바꿨는지, 무엇이 좋았는지를 정리해 봤습니다.
Why? Jekyll을 사용한 건 가장 유명한 정적 사이트 생성기이고 GitHub 에서 빌드를 해 주기 때문이었습니다. 적당한 theme 을 찾아 받고 그 위에 글을 올리고, 가끔 약간의 customize를 했습니다.
근데 사용하기가 조금 불편했습니다. 웹 지식이 부족해서인 것 같긴 하지만, 어떤 것이 생성 결과물인지, 내가 customize 하고자 하는 부분과 관련된 코드는 어디에 있는지 등을 찾기 어려웠습니다." />
<meta property="og:type" content="article" />
<meta property="og:url" content="http://huijeong-kim.github.io/post/2023-06-15-jekyll-to-hugo/" /><meta property="article:section" content="post" />
<meta property="article:published_time" content="2023-06-15T16:24:38+09:00" />
<meta property="article:modified_time" content="2023-06-15T16:24:38+09:00" />

<meta name="twitter:card" content="summary"/>
<meta name="twitter:title" content="Jekyll to Hugo"/>
<meta name="twitter:description" content="이 블로그는 정적 사이트 생성기를 사용하여 웹페이지를 생성하고, 이를 GitHub에 올려서 hosting하고 있습니다. 그 동안은 Jekyll 을 사용하여 페이지를 생성했는데, 이번에 Hugo로 바꿔봤습니다. 어떻게 바꿨는지, 무엇이 좋았는지를 정리해 봤습니다.
Why? Jekyll을 사용한 건 가장 유명한 정적 사이트 생성기이고 GitHub 에서 빌드를 해 주기 때문이었습니다. 적당한 theme 을 찾아 받고 그 위에 글을 올리고, 가끔 약간의 customize를 했습니다.
근데 사용하기가 조금 불편했습니다. 웹 지식이 부족해서인 것 같긴 하지만, 어떤 것이 생성 결과물인지, 내가 customize 하고자 하는 부분과 관련된 코드는 어디에 있는지 등을 찾기 어려웠습니다."/>


<script type="application/ld+json">
{
  "@context": "https://schema.org",
  "@type": "BreadcrumbList",
  "itemListElement": [
    {
      "@type": "ListItem",
      "position":  1 ,
      "name": "Posts",
      "item": "http://huijeong-kim.github.io/post/"
    }, 
    {
      "@type": "ListItem",
      "position":  2 ,
      "name": "Jekyll to Hugo",
      "item": "http://huijeong-kim.github.io/post/2023-06-15-jekyll-to-hugo/"
    }
  ]
}
</script>
<script type="application/ld+json">
{
  "@context": "https://schema.org",
  "@type": "BlogPosting",
  "headline": "Jekyll to Hugo",
  "name": "Jekyll to Hugo",
  "description": "이 블로그는 정적 사이트 생성기를 사용하여 웹페이지를 생성하고, 이를 GitHub에 올려서 hosting하고 있습니다. 그 동안은 Jekyll 을 사용하여 페이지를 생성했는데, 이번에 Hugo로 바꿔봤습니다. 어떻게 바꿨는지, 무엇이 좋았는지를 정리해 봤습니다.\nWhy? Jekyll을 사용한 건 가장 유명한 정적 사이트 생성기이고 GitHub 에서 빌드를 해 주기 때문이었습니다. 적당한 theme 을 찾아 받고 그 위에 글을 올리고, 가끔 약간의 customize를 했습니다.\n근데 사용하기가 조금 불편했습니다. 웹 지식이 부족해서인 것 같긴 하지만, 어떤 것이 생성 결과물인지, 내가 customize 하고자 하는 부분과 관련된 코드는 어디에 있는지 등을 찾기 어려웠습니다.",
  "keywords": [
    
  ],
  "articleBody": "이 블로그는 정적 사이트 생성기를 사용하여 웹페이지를 생성하고, 이를 GitHub에 올려서 hosting하고 있습니다. 그 동안은 Jekyll 을 사용하여 페이지를 생성했는데, 이번에 Hugo로 바꿔봤습니다. 어떻게 바꿨는지, 무엇이 좋았는지를 정리해 봤습니다.\nWhy? Jekyll을 사용한 건 가장 유명한 정적 사이트 생성기이고 GitHub 에서 빌드를 해 주기 때문이었습니다. 적당한 theme 을 찾아 받고 그 위에 글을 올리고, 가끔 약간의 customize를 했습니다.\n근데 사용하기가 조금 불편했습니다. 웹 지식이 부족해서인 것 같긴 하지만, 어떤 것이 생성 결과물인지, 내가 customize 하고자 하는 부분과 관련된 코드는 어디에 있는지 등을 찾기 어려웠습니다.\n기존 theme의 git repo를 fork 해서 사용하는 것도 별로였습니다. Theme repo 의 최신 변경점을 내 repo 에 반영하기도, 내 변경점과 분리 관리하기도 어려운 구조였어요.\n그래서 대안을 찾다 요즘 많이 보이는 Hugo를 사용해 봤습니다. 점점 인기가 많아져 Jekyll 보다 GitHub star 수가 많다는 Hugo는 빠른 것이 강점인 Go 기반의 정적 사이트 생성기 입니다. 일단 마음에 드는 theme 이 있어서 다운받아 본 건데요, 설치하고 잠깐 사용해 보는데 꽤 만족스러워서 바로 옮겼습니다.\nMigration Jekyll에서 Hugo로 옮겨가는 과정은 다음과 같습니다.\n설치, theme 다운로드 등 기본 사용법에 대한 내용은 공식 홈페이지를 참고해 주세요. Hugo 설치하고, hugo new site 'folder-name' 명령어를 사용해 새 블로그를 만들고, theme 을 theme 폴더에 git submodule로 추가하고 셋업하면, 바로 빌드하고 결과를 확인할 수 있습니다.\n이미 Jekyll 블로그를 가지고 있는 경우라면, 다음과 같이 import jekyll 명령어를 사용하여 간편하게 옮길 수 있습니다. huijeong-kim.github.io/ 가 이전에 사용하던 Jekyll 폴더고, migrate 가 Hugo를 사용한 새 블로그의 폴더명 입니다. migrate 폴더는 이 명령어를 통해 생성됩니다.\n$ hugo import jekyll huijeong-kim.github.io/ migrate 저는 처음 Hugo 설치하고 구경하다 글도 옮겨봤는데 잘 되어 그대로 전부 옮겨서, 하나 하나 손으로 옮겼습니다. 그러다 뒤 늦게 이 명령어를 알고 실행해 봤는데 아주 잘 되네요! 다들 이거 쓰세여…\nTroubleshooting 이전 과정에서 본 아주 소소한(troubleshooting이란 이름을 붙이기도 애매할 정도의) 오류 혹은 이슈들은 다음과 같습니다.\nMarkdown meta 정보 포맷 오류 제 블로그에선 tags 항목에서 오류가 있었습니다. 기존 블로그를 Hugo로 import 한 뒤 빌드하면 다음과 같은 에러 메시지가 나왔습니다. tags 항목을 iterate 하지 못 하고 있었습니다.\nError: error building site: render: failed to render pages: render of \"page\" failed: \"/Users/huijeongkim/Workspace/blog-test/migrate/themes/papermod/layouts/_default/baseof.html:5:8\": execute of template failed: template: _default/single.html:5:8: executing \"_default/single.html\" at \u003cpartial \"head.html\" .\u003e: error calling partial: \"/Users/huijeongkim/Workspace/blog-test/migrate/themes/papermod/layouts/partials/head.html:19:31\": execute of template failed: template: partials/head.html:19:31: executing \"partials/head.html\" at \u003c.Params.tags\u003e: range can't iterate over as, rust, type casting 사실 이전에는 다음과 같은 형태로 tags 항목을 작성했는데요. --- date: \"2023-05-02T00:00:00Z\" tags: rust, as, type casting title: as operator in Rust ---\nHugo(혹은 제가 사용하는 theme) 에서는 이런 형태로 작성해야 했습니다. --- date: \"2023-05-02T00:00:00Z\" tags: [\"rust\", \"as\", \"type casting\"] title: as operator in Rust ---\n이전 블로그에서는 인터넷 어딘가에서 발견한 코드를 복붙해서 조금 이상한 형태였던 것 같긴 해요. 이게 Hugo(혹은 제가 사용한 theme)에서 tags 가져 가는 방식과 다른 것 같고요. 아무튼, 이런 식의 변환 오류가 생길 수 있고, 이 경우 손수 혹은 스크립트 작성해서 변환해야 할 수 있습니다.\nPost permalink Jekyll을 사용할 때 블로그 글의 permalink를 아래와 같이 설정했었습니다. 그래서 글 주소는 https://huijeong-kim.github.io/2023/05/02/rust-as-operator/ 과 같은 형태가 되었어요.\npermalink: /:year/:month/:day/:title/ Hugo로 import 한 뒤에는 글 주소가 https://huijeong-kim.github.io/post/2023-05-02-rust-as-operator/ 로 바뀌었습니다. 달라진 것은 1)post 가 추가 됨, 2) 날짜 형태 입니다.\n먼저, post가 추가된 이유를 보면,\nHugo의 폴더 구조는 다음과 같고, 모든 컨텐츠들은 content 폴더에 추가됩니다. 그리고 공식 사이트 설명에 따르면 content 폴더 내의 top-level 폴더는 “content section\"을 의미한다고 해요. Content section은 post와 같은 폴더로 하위 글을 갖고 있는 section일 수도 있고, archives.md 파일과 같은 단일 페이지로 이루어진 section일 수도 있습니다.\nSection 지정 없이 새로운 글을 추가한다면, 글 목록이 아닌 메뉴에 항목이 추가될 것 입니다. hugo new 2023/06/15/my-new-page.md로 글을 추가하려 하면, 블로그 글이 추가되는 것이 아니라 2023이란 context section이 추가되는 것 이죠.\n그리고 날짜 형태를 보겠습니다. 만일 yyyy/mm/dd 형태의 글을 다음과 같이 추가한다면,\n1 hugo new post/2023/05/02/rust-as-operator.md 그럼 post/2023/05/02/rust-as-operator.md 파일이 생성됩니다. 즉, content/post 폴더 안에, 2023 폴더, 그 안에 05 폴더, 그 안에 02 폴더, 그 안에 rust-as-operator.md 파일이 생성됩니다.\nyyyy/mm/dd/title 형태의 url을 가져가려면 이런 식의 날짜 hierarchy 를 가질 수 밖에 없더라고요. 공식 사이트 에도 이런 구조가 date-base hierarchy 로 소개되어 있습니다.\nContent 추가 시 title을 2023/06/15/my-new-page.md로 할 순 없지만, 또 다른 방법이 있더라고요! Title은 2023-06-15-my-new-page.md 등으로 설정하고, md 파일에 url을 지정하면 됩니다.\n이 url 항목을 추가한다면 무사히 이전 링크를 그대로 사용할 수 있습니다. 모든 makrdown 파일을 수정하는 게 좀 귀찮은 일이 될 수 있겠지만, 글 url 수정을 원치 않다면 이렇게 할 수 밖에 없을 것 같습니다. 아래에 설명 될 utterance 댓글 연동 관점에서도 url 유지하는 게 좋기도 하니, 고려해 볼만 합니다.\n*2023이라는 section이 추가되고, 동일한 이름의 파일이 이 section에 추가된다면 (2023/06/15/my-new-page.md) 약간의 혼란이 있는 것 같긴 합니다만, 그렇게 쓸 일이 없겠죠.\n--- date: \"2023-05-02T00:00:00Z\" tags: rust, as, type casting title: as operator in Rust url: '/2023/05/02/rust-as-operator-rust/' --- 보통 하루에 글 한 개 미만인 저에게는 date-based hierarchy가 딱히 필요하지 않고, title과 link 가 다른 것도 마음에 들지 않아, 그냥 title을 yyyy-mm-dd-title 형태로 모두 바꿨습니다. 사실 이전에 yyyy/mm/dd 형태를 쓴게 후회되네요. 글이 몇 개 안 되어서 다행이었어요.\nutterance 댓글 재 연동 Hugo는 Disqus 연동을 지원합니다. 하지만 저는 기존 블로그에서 사용했던 utterance를 사용하고, 이전에 달린 댓글을 그대로 유지하고 싶어서 다음과 같이 수정하였습니다.\n먼저 theme 에 정의된 comments.html 을 오버라이딩 하는 파일을 추가하였습니다. themes/papermod/layouts/partials/comments.html 에 comment 관련 코드가 있는데, layouts/partials/comments.html 파일을 추가하면 theme 파일을 오버라이딩 할 수 있습니다.\n기존 블로그에 삽입했던 utterance script를 나의 comments.html 파일에 붙여넣으면 됩니다. 필요하다면 layouts/_default/single.html 파일을 오버라이딩 하여 comment, navigator, share button간 순서 및 위치 조정을 할 수도 있습니다.\n저는 utterance의 Blog Post \u003c-\u003e Issue Mapping 옵션을 “Issue title contains page pathname” 옵션으로 사용했습니다. 그 말은 즉, 생성 된 issue들의 이름과 pathname이 같다면 댓글이 연동된다는 의미였습니다.\n기존 글들의 pathname을 모두 바꿨기 때문에, utterance로 인해 생긴 issue들의 title을 2023/05/02/rust-as-operator 에서 post/2023-05-02-rust-as-operator로 바꾸니 기존의 댓글들이 새 블로그에서도 정상적으로 보였습니다.\nDeploy Jekyll을 사용할 때는 따로 빌드하지 않아도, markdown 글만 커밋해도 github가 빌드해 줬습니다. 이게 Jekyll의 가장 큰 장점이었던 것 같은데, 이제는 이 부분을 다른 방식으로 해결해야 합니다.\n많은 사람들이 netlify를 활용하던데요. 저는 가끔 수정되는 정적 사이트를 배포 툴을 사용할 필요가 있을까라는 생각, 내 블로그 URL을 *.netlify.app 로 바꾸고 싶지 않다는 생각에 도입하진 않았습니다.\n대신 제 블로그 repo 인 huijeong-kim.github.io 에 생성 결과된 HTML를 업로드하도록 했습니다. Hugo repo의 결과물이 나오는 폴더인 public 폴더를 제 블로그 repo가 되도록 git submodule로 연결하였습니다. 이 아이디어는 검색하다 여기서 보고 따라해 봤어요. (정말 좋은 아이디어에요. 감사합니다!)\n\u003c 디렉터리 구조와 연결된 git submodule \u003e blog ├── archetypes ├── content ├── hugo.toml ├── layouts ├── public ----\u003e (submodule) huijeong-kim.github.io ├── resources └── themes └── papermod ---\u003e (submodule) hugo-PaperMod\n여기서 두 개의 git repo를 관리하는 것이 조금 귀찮아 지는데요. 위의 링크에 소개된 것과 같이 쉘 스크립트로 자동화 해도 되고, git hook을 걸어서 markdown 파일 commit/push 하면 submodule에도 관련 변경점이 같이 commit/push 되도록 관리해도 좋을 것 같습니다.\n아직은 git commit이 귀찮지 않은데, 조만간 ChatGPT가 작성해 준 아래의 post-commit hook과 push script를 도입, 가능하다면 GitHub Actions에도 추가해 보면 좋을 것 같아요.\npost-commit hook을 통한 sub-module commit 자동화\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 #!/bin/bash # Get the commit message from the initial commit commit_message=$(git log --format=%B -n 1 HEAD) # Path to the submodule directory submodule_dir=\"path/to/submodule\" # Check if the submodule has any changes cd \"$submodule_dir\" has_changes=$(git status --porcelain) # Commit the changes in the submodule, if any if [[ -n \"$has_changes\" ]]; then git add . git commit -m \"$commit_message (submodule update)\" fi exit 0 Remote commit push 할 때 submodule도 함께 push하는 스크립트\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 #!/bin/bash # Path to the submodule directory submodule_dir=\"path/to/submodule\" # Remote name for the submodule submodule_remote=\"origin\" # Check if the current branch is the branch you want to track current_branch=$(git rev-parse --abbrev-ref HEAD) tracked_branch=\"main\" # Replace with your desired branch name if [[ \"$current_branch\" != \"$tracked_branch\" ]]; then exit 0 fi # Push changes to the main repository remote git push # Push changes to the submodule remote cd \"$submodule_dir\" git push \"$submodule_remote\" \"$current_branch\" exit 0 좋은 점 빠르다 Hugo는 “빠른 정적 사이트 생성기\"로 유명합니다. 처음에는 블로그 글 쓰는 게 자주 있는 것도 아니고, 이 생성 과정이 빠른 것이 크게 의미 있지 않다고 생각했어요. 그리고 빨라 봤자 큰 차이 없게찌.. 라는 생각도 있었고요.\n근데 막상 사용해 보니 신세계입니다. Jekyll 사용할 때는 조금 느린 것 같아 markdown 문서를 작성한 후 마지막에 퇴고시에만 bundle exec jekyll serve --watch로 결과 확인하면서 마무리 했습니다. 근데 이젠 글 작성 하면서 Ctrl+S 누를 때 마다 바로바로 빠르게 업데이트 된 웹 페이지를 볼 수 있어 매우X10000 편합니다. 블로그 작성 효율이 올라가고 만족도도 올라가, 블로그에 글을 올리는 것이 좀 더 재밌는 일이 되었습니다.\n직관적인 구조, 좋은 공식 문서 어디서 부터 어디까지가 theme 인지, output이 어디로 나오는지, 등등이 직관적으로 구성된 단순한 폴더 구조로 보여집니다. 웹을 모르는 저에게는 이 점이 크게 다가왔습니다. 게다가 공식 문서에 궁금한 대부분의 것들이 적혀 있어서, 추후 customize 하고 공부할 때 많은 도움이 될 것 같아요.\n사용하기 쉬운 툴 hugo 명령어만 있음 어디든 갈 수 있을 것만 같아요. 단순해서 좋아요.\n손쉬운 테마 도입 및 변경 테마 도입이 매우 쉽고 간편합니다. themes 폴더 아래 git submodule을 추가, hugo.toml 파일 내에 theme = \"papermod\" 를 추가하면 테마 도입 끝! (config 파일도 yml/toml/json 중 원하는 형태 선택 가능한 것도 또 장점) Theme 을 변경할 때도 새로운 submodule을 추가하고 toml 파일만 변경하면 되어서 매우 편합니다. 아래에서 언급할 overriding 된 파일 관리는 좀 필요하겠지만요.\nTheme Overriding 제일 좋았던 점 입니다. Theme 코드들을 직접 수정/변경/삭제 하는 것이 아니라 overriding을 할 수 있습니다!!!!!! Static file, Template file 등을 원하는 파일로 변경할 때 overriding 할 수 있습니다. 간단히 themes/my-theme/{변경하고자 하는파일}의 파일의 수정 버전을 {변경하고자 하는 파일}에 두면 됩니다. 즉, themes/my-theme/layouts/partials/comments.html을 수정하고 싶으면 layouts/partials/comments.html 파일을 생성, 원하는 내용을 넣으면 됩니다.\n그 결과 대 만족! 그 결과 만족스러운 블로그를 얻었습니다. 처음 사용해 보지만 아주 쉽게 소소한 기능을 추가/커스터마이즈도 할 수 있었습니다. 깔끔한 사용성, 직관적인 구조, 디테일한 문서를 보고 있으니 rust 처음 사용할 때 기분이 드네요.\n앞으로 어떻게 더 활용할 수 있을지 궁금한데, 더 공부하고 블로그도 멋지게 꾸며 봐야겠어요!\n",
  "wordCount" : "1590",
  "inLanguage": "en",
  "datePublished": "2023-06-15T16:24:38+09:00",
  "dateModified": "2023-06-15T16:24:38+09:00",
  "author":{
    "@type": "Person",
    "name": "Huijeong Kim"
  },
  "mainEntityOfPage": {
    "@type": "WebPage",
    "@id": "http://huijeong-kim.github.io/post/2023-06-15-jekyll-to-hugo/"
  },
  "publisher": {
    "@type": "Organization",
    "name": "Dev. note",
    "logo": {
      "@type": "ImageObject",
      "url": "http://huijeong-kim.github.io/favicon.ico"
    }
  }
}
</script>
</head>

<body class="" id="top">
<script>
    if (localStorage.getItem("pref-theme") === "dark") {
        document.body.classList.add('dark');
    } else if (localStorage.getItem("pref-theme") === "light") {
        document.body.classList.remove('dark')
    } else if (window.matchMedia('(prefers-color-scheme: dark)').matches) {
        document.body.classList.add('dark');
    }

</script>

<header class="header">
    <nav class="nav">
        <div class="logo">
            <a href="http://huijeong-kim.github.io/" accesskey="h" title="Dev. note (Alt + H)">Dev. note</a>
            <div class="logo-switches">
                <button id="theme-toggle" accesskey="t" title="(Alt + T)">
                    <svg id="moon" xmlns="http://www.w3.org/2000/svg" width="24" height="18" viewBox="0 0 24 24"
                        fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                        stroke-linejoin="round">
                        <path d="M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"></path>
                    </svg>
                    <svg id="sun" xmlns="http://www.w3.org/2000/svg" width="24" height="18" viewBox="0 0 24 24"
                        fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                        stroke-linejoin="round">
                        <circle cx="12" cy="12" r="5"></circle>
                        <line x1="12" y1="1" x2="12" y2="3"></line>
                        <line x1="12" y1="21" x2="12" y2="23"></line>
                        <line x1="4.22" y1="4.22" x2="5.64" y2="5.64"></line>
                        <line x1="18.36" y1="18.36" x2="19.78" y2="19.78"></line>
                        <line x1="1" y1="12" x2="3" y2="12"></line>
                        <line x1="21" y1="12" x2="23" y2="12"></line>
                        <line x1="4.22" y1="19.78" x2="5.64" y2="18.36"></line>
                        <line x1="18.36" y1="5.64" x2="19.78" y2="4.22"></line>
                    </svg>
                </button>
            </div>
        </div>
        <ul id="menu">
            <li>
                <a href="http://huijeong-kim.github.io/archives/" title="Archives">
                    <span>Archives</span>
                </a>
            </li>
            <li>
                <a href="http://huijeong-kim.github.io/post/" title="Posts">
                    <span>Posts</span>
                </a>
            </li>
            <li>
                <a href="http://huijeong-kim.github.io/search/" title="Search (Alt &#43; /)" accesskey=/>
                    <span>Search</span>
                </a>
            </li>
            <li>
                <a href="http://huijeong-kim.github.io/tags/" title="Tags">
                    <span>Tags</span>
                </a>
            </li>
        </ul>
    </nav>
</header>
<main class="main">

<article class="post-single">
  <header class="post-header">
    <div class="breadcrumbs"><a href="http://huijeong-kim.github.io/">Home</a>&nbsp;»&nbsp;<a href="http://huijeong-kim.github.io/post/">Posts</a></div>
    <h1 class="post-title">
      Jekyll to Hugo
    </h1>
    <div class="post-meta"><span title='2023-06-15 16:24:38 +0900 KST'>2023-06-15</span>&nbsp;·&nbsp;8 min&nbsp;·&nbsp;1590 words&nbsp;·&nbsp;Huijeong Kim

</div>
  </header> <div class="toc">
    <details  open>
        <summary accesskey="c" title="(Alt + C)">
            <span class="details">Table of Contents</span>
        </summary>

        <div class="inner"><ul>
                <li>
                    <a href="#why" aria-label="Why?">Why?</a></li>
                <li>
                    <a href="#migration" aria-label="Migration">Migration</a></li>
                <li>
                    <a href="#troubleshooting" aria-label="Troubleshooting">Troubleshooting</a><ul>
                        
                <li>
                    <a href="#markdown-meta-%ec%a0%95%eb%b3%b4-%ed%8f%ac%eb%a7%b7-%ec%98%a4%eb%a5%98" aria-label="Markdown meta 정보 포맷 오류">Markdown meta 정보 포맷 오류</a></li>
                <li>
                    <a href="#post-permalink" aria-label="Post permalink">Post permalink</a></li>
                <li>
                    <a href="#utterance-%eb%8c%93%ea%b8%80-%ec%9e%ac-%ec%97%b0%eb%8f%99" aria-label="utterance 댓글 재 연동">utterance 댓글 재 연동</a></li>
                <li>
                    <a href="#deploy" aria-label="Deploy">Deploy</a></li></ul>
                </li>
                <li>
                    <a href="#%ec%a2%8b%ec%9d%80-%ec%a0%90" aria-label="좋은 점">좋은 점</a><ul>
                        
                <li>
                    <a href="#%eb%b9%a0%eb%a5%b4%eb%8b%a4" aria-label="빠르다">빠르다</a></li>
                <li>
                    <a href="#%ec%a7%81%ea%b4%80%ec%a0%81%ec%9d%b8-%ea%b5%ac%ec%a1%b0-%ec%a2%8b%ec%9d%80-%ea%b3%b5%ec%8b%9d-%eb%ac%b8%ec%84%9c" aria-label="직관적인 구조, 좋은 공식 문서">직관적인 구조, 좋은 공식 문서</a></li>
                <li>
                    <a href="#%ec%82%ac%ec%9a%a9%ed%95%98%ea%b8%b0-%ec%89%ac%ec%9a%b4-%ed%88%b4" aria-label="사용하기 쉬운 툴">사용하기 쉬운 툴</a></li>
                <li>
                    <a href="#%ec%86%90%ec%89%ac%ec%9a%b4-%ed%85%8c%eb%a7%88-%eb%8f%84%ec%9e%85-%eb%b0%8f-%eb%b3%80%ea%b2%bd" aria-label="손쉬운 테마 도입 및 변경">손쉬운 테마 도입 및 변경</a></li>
                <li>
                    <a href="#theme-overriding" aria-label="Theme Overriding">Theme Overriding</a></li></ul>
                </li>
                <li>
                    <a href="#%ea%b7%b8-%ea%b2%b0%ea%b3%bc-%eb%8c%80-%eb%a7%8c%ec%a1%b1" aria-label="그 결과 대 만족!">그 결과 대 만족!</a>
                </li>
            </ul>
        </div>
    </details>
</div>

  <div class="post-content"><p>이 블로그는 정적 사이트 생성기를 사용하여 웹페이지를 생성하고, 이를 GitHub에 올려서 hosting하고 있습니다. 그 동안은 <code>Jekyll</code> 을 사용하여 페이지를 생성했는데, 이번에 <code>Hugo</code>로 바꿔봤습니다. 어떻게 바꿨는지, 무엇이 좋았는지를 정리해 봤습니다.</p>
<p> </p>
<h1 id="why">Why?<a hidden class="anchor" aria-hidden="true" href="#why">#</a></h1>
<p><code>Jekyll</code>을 사용한 건 가장 유명한 정적 사이트 생성기이고 GitHub 에서 빌드를 해 주기 때문이었습니다. 적당한 theme 을 찾아 받고 그 위에 글을 올리고, 가끔 약간의 customize를 했습니다.</p>
<p>근데 사용하기가 조금 불편했습니다. 웹 지식이 부족해서인 것 같긴 하지만, 어떤 것이 생성 결과물인지, 내가 customize 하고자 하는 부분과 관련된 코드는 어디에 있는지 등을 찾기 어려웠습니다.</p>
<p>기존 theme의 git repo를 fork 해서 사용하는 것도 별로였습니다. Theme repo 의 최신 변경점을 내 repo 에 반영하기도, 내 변경점과 분리 관리하기도 어려운 구조였어요.</p>
<p>그래서 대안을 찾다 요즘 많이 보이는 <code>Hugo</code>를 사용해 봤습니다. 점점 인기가 많아져 <code>Jekyll</code> 보다 GitHub star 수가 많다는 <code>Hugo</code>는 빠른 것이 강점인 Go 기반의 정적 사이트 생성기 입니다. 일단 마음에 드는 theme 이 있어서 다운받아 본 건데요, 설치하고 잠깐 사용해 보는데 꽤 만족스러워서 바로 옮겼습니다.</p>
<p> 
 </p>
<h1 id="migration">Migration<a hidden class="anchor" aria-hidden="true" href="#migration">#</a></h1>
<p><code>Jekyll</code>에서 <code>Hugo</code>로 옮겨가는 과정은 다음과 같습니다.</p>
<p>설치, theme 다운로드 등 기본 사용법에 대한 내용은 <a href="https://gohugo.io/getting-started/quick-start/">공식 홈페이지</a>를 참고해 주세요. Hugo 설치하고, <code>hugo new site 'folder-name'</code> 명령어를 사용해 새 블로그를 만들고, theme 을 theme 폴더에 git submodule로 추가하고 셋업하면, 바로 빌드하고 결과를 확인할 수 있습니다.</p>
<p>이미 <code>Jekyll</code> 블로그를 가지고 있는 경우라면, 다음과 같이 <code>import jekyll</code> 명령어를 사용하여 간편하게 옮길 수 있습니다. <code>huijeong-kim.github.io/</code> 가 이전에 사용하던 <code>Jekyll</code> 폴더고, <code>migrate</code> 가 <code>Hugo</code>를 사용한 새 블로그의 폴더명 입니다. <code>migrate</code> 폴더는 이 명령어를 통해 생성됩니다.</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>$ hugo import jekyll huijeong-kim.github.io/ migrate</span></span></code></pre></div>
<p> </p>
<p>저는 처음 Hugo 설치하고 구경하다 글도 옮겨봤는데 잘 되어 그대로 전부 옮겨서, 하나 하나 손으로 옮겼습니다. 그러다 뒤 늦게 이 명령어를 알고 실행해 봤는데 아주 잘 되네요! 다들 이거 쓰세여&hellip;</p>
<p> </p>
<h1 id="troubleshooting">Troubleshooting<a hidden class="anchor" aria-hidden="true" href="#troubleshooting">#</a></h1>
<p>이전 과정에서 본 아주 소소한(troubleshooting이란 이름을 붙이기도 애매할 정도의) 오류 혹은 이슈들은 다음과 같습니다.</p>
<h2 id="markdown-meta-정보-포맷-오류">Markdown meta 정보 포맷 오류<a hidden class="anchor" aria-hidden="true" href="#markdown-meta-정보-포맷-오류">#</a></h2>
<p>제 블로그에선 tags 항목에서 오류가 있었습니다. 기존 블로그를 <code>Hugo</code>로 import 한 뒤 빌드하면 다음과 같은 에러 메시지가 나왔습니다. <code>tags</code> 항목을 iterate 하지 못 하고 있었습니다.</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;display:grid;"><code class="language-md" data-lang="md"><span style="display:flex;"><span>Error: error building site: render: failed to render pages: render of &#34;page&#34; failed: 
</span></span><span style="display:flex;"><span>&#34;/Users/huijeongkim/Workspace/blog-test/migrate/themes/papermod/layouts/_default/baseof.html:5:8&#34;:
</span></span><span style="display:flex;"><span>execute of template failed: template: _default/single.html:5:8: 
</span></span><span style="display:flex;"><span>executing &#34;_default/single.html&#34; at &lt;<span style="color:#ff79c6">partial</span> &#34;<span style="color:#50fa7b">head</span>.<span style="color:#50fa7b">html</span>&#34; .&gt;: 
</span></span><span style="display:flex;"><span>error calling partial: &#34;/Users/huijeongkim/Workspace/blog-test/migrate/themes/papermod/layouts/partials/head.html:19:31&#34;: 
</span></span><span style="display:flex;"><span>execute of template failed: template: partials/head.html:19:31: 
</span></span><span style="display:flex; background-color:#3d3f4a"><span>executing &#34;partials/head.html&#34; at &lt;<span style="color:#ff79c6">.Params.tags</span>&gt;: range can&#39;t iterate over as, rust, type casting</span></span></code></pre></div>
<p> </p>
<p>사실 이전에는 다음과 같은 형태로 tags 항목을 작성했는데요.
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-md" data-lang="md"><span style="display:flex;"><span>---
</span></span><span style="display:flex;"><span>date: &#34;2023-05-02T00:00:00Z&#34;
</span></span><span style="display:flex;"><span>tags: rust, as, type casting
</span></span><span style="display:flex;"><span>title: as operator in Rust
</span></span><span style="display:flex;"><span>---</span></span></code></pre></div></p>
<p> </p>
<p><code>Hugo</code>(혹은 제가 사용하는 theme) 에서는 이런 형태로 작성해야 했습니다.
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-md" data-lang="md"><span style="display:flex;"><span>---
</span></span><span style="display:flex;"><span>date: &#34;2023-05-02T00:00:00Z&#34;
</span></span><span style="display:flex;"><span>tags: [&#34;rust&#34;, &#34;as&#34;, &#34;type casting&#34;]
</span></span><span style="display:flex;"><span>title: as operator in Rust
</span></span><span style="display:flex;"><span>---</span></span></code></pre></div></p>
<p> </p>
<p>이전 블로그에서는 인터넷 어딘가에서 발견한 코드를 복붙해서 조금 이상한 형태였던 것 같긴 해요. 이게 <code>Hugo</code>(혹은 제가 사용한 theme)에서 tags 가져 가는 방식과 다른 것 같고요. 아무튼, 이런 식의 변환 오류가 생길 수 있고, 이 경우 손수 혹은 스크립트 작성해서 변환해야 할 수 있습니다.</p>
<p> </p>
<h2 id="post-permalink">Post permalink<a hidden class="anchor" aria-hidden="true" href="#post-permalink">#</a></h2>
<p><code>Jekyll</code>을 사용할 때 블로그 글의 permalink를 아래와 같이 설정했었습니다. 그래서 글 주소는 <code>https://huijeong-kim.github.io/2023/05/02/rust-as-operator/</code> 과 같은 형태가 되었어요.</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-yml" data-lang="yml"><span style="display:flex;"><span><span style="color:#ff79c6">permalink</span>: /:year/:month/:day/:title/</span></span></code></pre></div>
<p> </p>
<p><code>Hugo</code>로 import 한 뒤에는 글 주소가 <code>https://huijeong-kim.github.io/post/2023-05-02-rust-as-operator/</code> 로 바뀌었습니다. 달라진 것은 1)<code>post</code> 가 추가 됨, 2) 날짜 형태 입니다.</p>
<p> </p>
<p>먼저, <code>post</code>가 추가된 이유를 보면,</p>
<p><code>Hugo</code>의 폴더 구조는 <a href="https://gohugo.io/getting-started/directory-structure/#directory-structure-explained">다음</a>과 같고, 모든 컨텐츠들은 <code>content</code> 폴더에 추가됩니다. 그리고
<a href="https://gohugo.io/content-management/organization/">공식 사이트 설명</a>에 따르면 <code>content</code> 폴더 내의  top-level 폴더는 &ldquo;content section&quot;을 의미한다고 해요. Content section은 <code>post</code>와 같은 폴더로 하위 글을 갖고 있는 section일 수도 있고, <code>archives.md</code> 파일과 같은 단일 페이지로 이루어진 section일 수도 있습니다.</p>
<p>Section 지정 없이 새로운 글을 추가한다면, 글 목록이 아닌 메뉴에 항목이 추가될 것 입니다. <code>hugo new 2023/06/15/my-new-page.md</code>로 글을 추가하려 하면, 블로그 글이 추가되는 것이 아니라 2023이란 context section이 추가되는 것 이죠.</p>
<p> </p>
<p>그리고 날짜 형태를 보겠습니다. 만일 <code>yyyy/mm/dd</code> 형태의 글을 다음과 같이 추가한다면,</p>
<div class="highlight"><div style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-fallback" data-lang="fallback"><span style="display:flex;"><span>hugo new post/2023/05/02/rust-as-operator.md
</span></span></code></pre></td></tr></table>
</div>
</div><p>그럼 <code>post/2023/05/02/rust-as-operator.md</code> 파일이 생성됩니다. 즉, <code>content/post</code> 폴더 안에, <code>2023</code> 폴더, 그 안에 <code>05</code> 폴더, 그 안에 <code>02</code> 폴더, 그 안에 <code>rust-as-operator.md</code> 파일이 생성됩니다.</p>
<p><code>yyyy/mm/dd/title</code> 형태의 url을 가져가려면 이런 식의 날짜 hierarchy 를 가질 수 밖에 없더라고요. <a href="https://gohugo.io/content-management/urls/#permalinks">공식 사이트</a> 에도 이런 구조가 date-base hierarchy 로 소개되어 있습니다.</p>
<p> </p>
<p>Content 추가 시 title을 <code>2023/06/15/my-new-page.md</code>로 할 순 없지만, 또 다른 방법이 있더라고요!  Title은 <code>2023-06-15-my-new-page.md</code> 등으로 설정하고, md 파일에 <a href="https://gohugo.io/content-management/urls/#url">url</a>을 지정하면 됩니다.</p>
<p>이 <code>url</code> 항목을 추가한다면 무사히 이전 링크를 그대로 사용할 수 있습니다. 모든 makrdown 파일을 수정하는 게 좀 귀찮은 일이 될 수 있겠지만, 글 url 수정을 원치 않다면 이렇게 할 수 밖에 없을 것 같습니다. 아래에 설명 될 utterance 댓글 연동 관점에서도 url 유지하는 게 좋기도 하니, 고려해 볼만 합니다.</p>
<p>*<code>2023</code>이라는 section이 추가되고, 동일한 이름의 파일이 이 section에 추가된다면 (<code>2023/06/15/my-new-page.md</code>) 약간의 혼란이 있는 것 같긴 합니다만, 그렇게 쓸 일이 없겠죠.</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-md" data-lang="md"><span style="display:flex;"><span>---
</span></span><span style="display:flex;"><span>date: &#34;2023-05-02T00:00:00Z&#34;
</span></span><span style="display:flex;"><span>tags: rust, as, type casting
</span></span><span style="display:flex;"><span>title: as operator in Rust
</span></span><span style="display:flex;"><span>url: &#39;/2023/05/02/rust-as-operator-rust/&#39;
</span></span><span style="display:flex;"><span>---</span></span></code></pre></div>
<p> </p>
<p>보통 하루에 글 한 개 미만인 저에게는 date-based hierarchy가 딱히 필요하지 않고, title과 link 가 다른 것도 마음에 들지 않아, 그냥 title을 <code>yyyy-mm-dd-title</code> 형태로 모두 바꿨습니다. 사실 이전에 <code>yyyy/mm/dd</code> 형태를 쓴게 후회되네요. 글이 몇 개 안 되어서 다행이었어요.</p>
<p> 
 </p>
<h2 id="utterance-댓글-재-연동">utterance 댓글 재 연동<a hidden class="anchor" aria-hidden="true" href="#utterance-댓글-재-연동">#</a></h2>
<p><code>Hugo</code>는 <a href="https://gohugo.io/content-management/comments/">Disqus 연동을 지원</a>합니다. 하지만 저는 기존 블로그에서 사용했던 <a href="https://utteranc.es/">utterance</a>를 사용하고, 이전에 달린 댓글을 그대로 유지하고 싶어서 다음과 같이 수정하였습니다.</p>
<p>먼저 theme 에 정의된 <code>comments.html</code> 을 오버라이딩 하는 파일을 추가하였습니다. <code>themes/papermod/layouts/partials/comments.html</code> 에 comment 관련 코드가 있는데, <code>layouts/partials/comments.html</code> 파일을 추가하면 theme 파일을 오버라이딩 할 수 있습니다.</p>
<p>기존 블로그에 삽입했던 utterance script를 나의 <code>comments.html</code> 파일에 붙여넣으면 됩니다. 필요하다면 <code>layouts/_default/single.html</code> 파일을 오버라이딩 하여 comment, navigator, share button간 순서 및 위치 조정을 할 수도 있습니다.</p>
<p> </p>
<p>저는 utterance의 Blog Post &lt;-&gt; Issue Mapping 옵션을 &ldquo;Issue title contains page pathname&rdquo; 옵션으로 사용했습니다. 그 말은 즉, 생성 된 issue들의 이름과 pathname이 같다면 댓글이 연동된다는 의미였습니다.</p>
<p>기존 글들의 pathname을 모두 바꿨기 때문에, utterance로 인해 생긴 issue들의 title을 <code>2023/05/02/rust-as-operator</code> 에서 <code>post/2023-05-02-rust-as-operator</code>로 바꾸니 기존의 댓글들이 새 블로그에서도 정상적으로 보였습니다.</p>
<p> 
 </p>
<h2 id="deploy">Deploy<a hidden class="anchor" aria-hidden="true" href="#deploy">#</a></h2>
<p><code>Jekyll</code>을 사용할 때는 따로 빌드하지 않아도, markdown 글만 커밋해도 github가 빌드해 줬습니다. 이게 <code>Jekyll</code>의 가장 큰 장점이었던 것 같은데, 이제는 이 부분을 다른 방식으로 해결해야 합니다.</p>
<p>많은 사람들이 <a href="https://app.netlify.com/start">netlify</a>를 활용하던데요. 저는 가끔 수정되는 정적 사이트를 배포 툴을 사용할 필요가 있을까라는 생각, 내 블로그 URL을 <code>*.netlify.app</code> 로 바꾸고 싶지 않다는 생각에 도입하진 않았습니다.</p>
<p>대신 제 블로그 repo 인 <code>huijeong-kim.github.io</code> 에 생성 결과된 HTML를 업로드하도록 했습니다. <code>Hugo</code> repo의 결과물이 나오는 폴더인 <code>public</code> 폴더를 제 블로그 repo가 되도록 git submodule로 연결하였습니다. 이 아이디어는 검색하다 <a href="https://github.com/Integerous/Integerous.github.io">여기</a>서 보고 따라해 봤어요. (정말 좋은 아이디어에요. 감사합니다!)</p>
<p>&lt; 디렉터리 구조와 연결된 git submodule &gt;
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>blog
</span></span><span style="display:flex;"><span>  ├── archetypes
</span></span><span style="display:flex;"><span>  ├── content
</span></span><span style="display:flex;"><span>  ├── hugo.toml
</span></span><span style="display:flex;"><span>  ├── layouts
</span></span><span style="display:flex;"><span>  ├── public   ----&gt; <span style="color:#ff79c6">(</span>submodule<span style="color:#ff79c6">)</span> huijeong-kim.github.io
</span></span><span style="display:flex;"><span>  ├── resources
</span></span><span style="display:flex;"><span>  └── themes
</span></span><span style="display:flex;"><span>       └── papermod ---&gt; <span style="color:#ff79c6">(</span>submodule<span style="color:#ff79c6">)</span> hugo-PaperMod</span></span></code></pre></div></p>
<p> </p>
<p>여기서 두 개의 git repo를 관리하는 것이 조금 귀찮아 지는데요. 위의 링크에 소개된 것과 같이 쉘 스크립트로 자동화 해도 되고, git hook을 걸어서 markdown 파일 commit/push 하면 submodule에도 관련 변경점이 같이 commit/push 되도록 관리해도 좋을 것 같습니다.</p>
<p>아직은 git commit이 귀찮지 않은데, 조만간 ChatGPT가 작성해 준 아래의 post-commit hook과 push script를 도입, 가능하다면 GitHub Actions에도 추가해 보면 좋을 것 같아요.</p>
<p> </p>
<blockquote>
<p>post-commit hook을 통한 sub-module commit 자동화</p>
</blockquote>
<div class="highlight"><div style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 6
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 7
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 8
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 9
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">10
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">11
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">12
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">13
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">14
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">15
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">16
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">17
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">18
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">19
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span><span style="color:#ff79c6">#!/bin/bash
</span></span></span><span style="display:flex;"><span><span style="color:#ff79c6"></span>
</span></span><span style="display:flex;"><span><span style="color:#6272a4"># Get the commit message from the initial commit</span>
</span></span><span style="display:flex;"><span><span style="color:#8be9fd;font-style:italic">commit_message</span><span style="color:#ff79c6">=</span><span style="color:#ff79c6">$(</span>git log --format<span style="color:#ff79c6">=</span>%B -n <span style="color:#bd93f9">1</span> HEAD<span style="color:#ff79c6">)</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#6272a4"># Path to the submodule directory</span>
</span></span><span style="display:flex;"><span><span style="color:#8be9fd;font-style:italic">submodule_dir</span><span style="color:#ff79c6">=</span><span style="color:#f1fa8c">&#34;path/to/submodule&#34;</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#6272a4"># Check if the submodule has any changes</span>
</span></span><span style="display:flex;"><span><span style="color:#8be9fd;font-style:italic">cd</span> <span style="color:#f1fa8c">&#34;</span><span style="color:#8be9fd;font-style:italic">$submodule_dir</span><span style="color:#f1fa8c">&#34;</span>
</span></span><span style="display:flex;"><span><span style="color:#8be9fd;font-style:italic">has_changes</span><span style="color:#ff79c6">=</span><span style="color:#ff79c6">$(</span>git status --porcelain<span style="color:#ff79c6">)</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#6272a4"># Commit the changes in the submodule, if any</span>
</span></span><span style="display:flex;"><span><span style="color:#ff79c6">if</span> <span style="color:#ff79c6">[[</span> -n <span style="color:#f1fa8c">&#34;</span><span style="color:#8be9fd;font-style:italic">$has_changes</span><span style="color:#f1fa8c">&#34;</span> <span style="color:#ff79c6">]]</span>; <span style="color:#ff79c6">then</span>
</span></span><span style="display:flex;"><span>  git add .
</span></span><span style="display:flex;"><span>  git commit -m <span style="color:#f1fa8c">&#34;</span><span style="color:#8be9fd;font-style:italic">$commit_message</span><span style="color:#f1fa8c"> (submodule update)&#34;</span>
</span></span><span style="display:flex;"><span><span style="color:#ff79c6">fi</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#8be9fd;font-style:italic">exit</span> <span style="color:#bd93f9">0</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p> </p>
<blockquote>
<p>Remote commit push 할 때 submodule도 함께 push하는 스크립트</p>
</blockquote>
<div class="highlight"><div style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 6
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 7
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 8
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 9
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">10
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">11
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">12
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">13
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">14
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">15
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">16
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">17
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">18
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">19
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">20
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">21
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">22
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">23
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">24
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span><span style="color:#ff79c6">#!/bin/bash
</span></span></span><span style="display:flex;"><span><span style="color:#ff79c6"></span>
</span></span><span style="display:flex;"><span><span style="color:#6272a4"># Path to the submodule directory</span>
</span></span><span style="display:flex;"><span><span style="color:#8be9fd;font-style:italic">submodule_dir</span><span style="color:#ff79c6">=</span><span style="color:#f1fa8c">&#34;path/to/submodule&#34;</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#6272a4"># Remote name for the submodule</span>
</span></span><span style="display:flex;"><span><span style="color:#8be9fd;font-style:italic">submodule_remote</span><span style="color:#ff79c6">=</span><span style="color:#f1fa8c">&#34;origin&#34;</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#6272a4"># Check if the current branch is the branch you want to track</span>
</span></span><span style="display:flex;"><span><span style="color:#8be9fd;font-style:italic">current_branch</span><span style="color:#ff79c6">=</span><span style="color:#ff79c6">$(</span>git rev-parse --abbrev-ref HEAD<span style="color:#ff79c6">)</span>
</span></span><span style="display:flex;"><span><span style="color:#8be9fd;font-style:italic">tracked_branch</span><span style="color:#ff79c6">=</span><span style="color:#f1fa8c">&#34;main&#34;</span>  <span style="color:#6272a4"># Replace with your desired branch name</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#ff79c6">if</span> <span style="color:#ff79c6">[[</span> <span style="color:#f1fa8c">&#34;</span><span style="color:#8be9fd;font-style:italic">$current_branch</span><span style="color:#f1fa8c">&#34;</span> !<span style="color:#ff79c6">=</span> <span style="color:#f1fa8c">&#34;</span><span style="color:#8be9fd;font-style:italic">$tracked_branch</span><span style="color:#f1fa8c">&#34;</span> <span style="color:#ff79c6">]]</span>; <span style="color:#ff79c6">then</span>
</span></span><span style="display:flex;"><span>  <span style="color:#8be9fd;font-style:italic">exit</span> <span style="color:#bd93f9">0</span>
</span></span><span style="display:flex;"><span><span style="color:#ff79c6">fi</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#6272a4"># Push changes to the main repository remote</span>
</span></span><span style="display:flex;"><span>git push
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#6272a4"># Push changes to the submodule remote</span>
</span></span><span style="display:flex;"><span><span style="color:#8be9fd;font-style:italic">cd</span> <span style="color:#f1fa8c">&#34;</span><span style="color:#8be9fd;font-style:italic">$submodule_dir</span><span style="color:#f1fa8c">&#34;</span>
</span></span><span style="display:flex;"><span>git push <span style="color:#f1fa8c">&#34;</span><span style="color:#8be9fd;font-style:italic">$submodule_remote</span><span style="color:#f1fa8c">&#34;</span> <span style="color:#f1fa8c">&#34;</span><span style="color:#8be9fd;font-style:italic">$current_branch</span><span style="color:#f1fa8c">&#34;</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#8be9fd;font-style:italic">exit</span> <span style="color:#bd93f9">0</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p> 
 </p>
<h1 id="좋은-점">좋은 점<a hidden class="anchor" aria-hidden="true" href="#좋은-점">#</a></h1>
<h2 id="빠르다">빠르다<a hidden class="anchor" aria-hidden="true" href="#빠르다">#</a></h2>
<p><code>Hugo</code>는 &ldquo;빠른 정적 사이트 생성기&quot;로 유명합니다. 처음에는 블로그 글 쓰는 게 자주 있는 것도 아니고, 이 생성 과정이 빠른 것이 크게 의미 있지 않다고 생각했어요. 그리고 빨라 봤자 큰 차이 없게찌.. 라는 생각도 있었고요.</p>
<p>근데 막상 사용해 보니 신세계입니다. <code>Jekyll</code> 사용할 때는 조금 느린 것 같아  markdown 문서를 작성한 후 마지막에 퇴고시에만 <code>bundle exec jekyll serve --watch</code>로 결과 확인하면서 마무리 했습니다. 근데 이젠 글 작성 하면서 <code>Ctrl+S</code> 누를 때 마다 바로바로 빠르게 업데이트 된 웹 페이지를 볼 수 있어 매우X10000 편합니다. 블로그 작성 효율이 올라가고 만족도도 올라가, 블로그에 글을 올리는 것이 좀 더 재밌는 일이 되었습니다.</p>
<p> </p>
<h2 id="직관적인-구조-좋은-공식-문서">직관적인 구조, 좋은 공식 문서<a hidden class="anchor" aria-hidden="true" href="#직관적인-구조-좋은-공식-문서">#</a></h2>
<p>어디서 부터 어디까지가 theme 인지, output이 어디로 나오는지, 등등이 직관적으로 구성된 단순한 폴더 구조로 보여집니다. 웹을 모르는 저에게는 이 점이 크게 다가왔습니다. 게다가 공식 문서에 궁금한 대부분의 것들이 적혀 있어서, 추후 customize 하고 공부할 때 많은 도움이 될 것 같아요.</p>
<p> </p>
<h2 id="사용하기-쉬운-툴">사용하기 쉬운 툴<a hidden class="anchor" aria-hidden="true" href="#사용하기-쉬운-툴">#</a></h2>
<p><code>hugo</code> 명령어만 있음 어디든 갈 수 있을 것만 같아요. 단순해서 좋아요.</p>
<p> </p>
<h2 id="손쉬운-테마-도입-및-변경">손쉬운 테마 도입 및 변경<a hidden class="anchor" aria-hidden="true" href="#손쉬운-테마-도입-및-변경">#</a></h2>
<p>테마 도입이 매우 쉽고 간편합니다. <code>themes</code> 폴더 아래 git submodule을 추가, <code>hugo.toml</code> 파일 내에 <code>theme = &quot;papermod&quot;</code> 를 추가하면 테마 도입 끝! (config 파일도 yml/toml/json 중 원하는 형태 선택 가능한 것도 또 장점) Theme 을 변경할 때도 새로운 submodule을 추가하고 toml 파일만 변경하면 되어서 매우 편합니다. 아래에서 언급할 overriding 된 파일 관리는 좀 필요하겠지만요.</p>
<p> </p>
<h2 id="theme-overriding">Theme Overriding<a hidden class="anchor" aria-hidden="true" href="#theme-overriding">#</a></h2>
<p>제일 좋았던 점 입니다. Theme 코드들을 직접 수정/변경/삭제 하는 것이 아니라 <a href="https://gohugobrasil.netlify.app/themes/customizing/">overriding</a>을 할 수 있습니다!!!!!! Static file, Template file 등을 원하는 파일로 변경할 때 overriding 할 수 있습니다. 간단히 <code>themes/my-theme/{변경하고자 하는파일}</code>의 파일의 수정 버전을 <code>{변경하고자 하는 파일}</code>에 두면 됩니다. 즉, <code>themes/my-theme/layouts/partials/comments.html</code>을 수정하고 싶으면 <code>layouts/partials/comments.html</code> 파일을 생성, 원하는 내용을 넣으면 됩니다.</p>
<p> 
 </p>
<h1 id="그-결과-대-만족">그 결과 대 만족!<a hidden class="anchor" aria-hidden="true" href="#그-결과-대-만족">#</a></h1>
<p>그 결과 만족스러운 블로그를 얻었습니다. 처음 사용해 보지만 아주 쉽게 소소한 기능을 추가/커스터마이즈도 할 수 있었습니다. 깔끔한 사용성, 직관적인 구조, 디테일한 문서를 보고 있으니 rust 처음 사용할 때 기분이 드네요.</p>
<p>앞으로 어떻게 더 활용할 수 있을지 궁금한데, 더 공부하고 블로그도 멋지게 꾸며 봐야겠어요!</p>
<p> </p>


  </div>

  <footer class="post-footer">
    <ul class="post-tags">
    </ul>
<nav class="paginav">
  <a class="prev" href="http://huijeong-kim.github.io/post/2023-11-09-ml-strategy-1/">
    <span class="title">« Prev</span>
    <br>
    <span>ML Strategy 1</span>
  </a>
  <a class="next" href="http://huijeong-kim.github.io/post/2023-05-07-exploring-rust-strings/">
    <span class="title">Next »</span>
    <br>
    <span>Exploring Rust Strings</span>
  </a>
</nav>

  </footer><script src="https://utteranc.es/client.js"
        repo="huijeong-kim/huijeong-kim.github.io"
        issue-term="pathname"
        theme="github-light"
        crossorigin="anonymous"
        async>
</script>

</article>
    </main>
    
<footer class="footer">
    <span>&copy; 2025 <a href="http://huijeong-kim.github.io/">Dev. note</a></span>
    <span>
        Powered by
        <a href="https://gohugo.io/" rel="noopener noreferrer" target="_blank">Hugo</a> &
        <a href="https://github.com/adityatelange/hugo-PaperMod/" rel="noopener" target="_blank">PaperMod</a>
    </span>
</footer>
<a href="#top" aria-label="go to top" title="Go to Top (Alt + G)" class="top-link" id="top-link" accesskey="g">
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 12 6" fill="currentColor">
        <path d="M12 6H0l6-6z" />
    </svg>
</a>

<script>
    let menu = document.getElementById('menu')
    if (menu) {
        menu.scrollLeft = localStorage.getItem("menu-scroll-position");
        menu.onscroll = function () {
            localStorage.setItem("menu-scroll-position", menu.scrollLeft);
        }
    }

    document.querySelectorAll('a[href^="#"]').forEach(anchor => {
        anchor.addEventListener("click", function (e) {
            e.preventDefault();
            var id = this.getAttribute("href").substr(1);
            if (!window.matchMedia('(prefers-reduced-motion: reduce)').matches) {
                document.querySelector(`[id='${decodeURIComponent(id)}']`).scrollIntoView({
                    behavior: "smooth"
                });
            } else {
                document.querySelector(`[id='${decodeURIComponent(id)}']`).scrollIntoView();
            }
            if (id === "top") {
                history.replaceState(null, null, " ");
            } else {
                history.pushState(null, null, `#${id}`);
            }
        });
    });

</script>
<script>
    var mybutton = document.getElementById("top-link");
    window.onscroll = function () {
        if (document.body.scrollTop > 800 || document.documentElement.scrollTop > 800) {
            mybutton.style.visibility = "visible";
            mybutton.style.opacity = "1";
        } else {
            mybutton.style.visibility = "hidden";
            mybutton.style.opacity = "0";
        }
    };

</script>
<script>
    document.getElementById("theme-toggle").addEventListener("click", () => {
        if (document.body.className.includes("dark")) {
            document.body.classList.remove('dark');
            localStorage.setItem("pref-theme", 'light');
        } else {
            document.body.classList.add('dark');
            localStorage.setItem("pref-theme", 'dark');
        }
    })

</script>
<script>
    document.querySelectorAll('pre > code').forEach((codeblock) => {
        const container = codeblock.parentNode.parentNode;

        const copybutton = document.createElement('button');
        copybutton.classList.add('copy-code');
        copybutton.innerHTML = 'copy';

        function copyingDone() {
            copybutton.innerHTML = 'copied!';
            setTimeout(() => {
                copybutton.innerHTML = 'copy';
            }, 2000);
        }

        copybutton.addEventListener('click', (cb) => {
            if ('clipboard' in navigator) {
                navigator.clipboard.writeText(codeblock.textContent);
                copyingDone();
                return;
            }

            const range = document.createRange();
            range.selectNodeContents(codeblock);
            const selection = window.getSelection();
            selection.removeAllRanges();
            selection.addRange(range);
            try {
                document.execCommand('copy');
                copyingDone();
            } catch (e) { };
            selection.removeRange(range);
        });

        if (container.classList.contains("highlight")) {
            container.appendChild(copybutton);
        } else if (container.parentNode.firstChild == container) {
            
        } else if (codeblock.parentNode.parentNode.parentNode.parentNode.parentNode.nodeName == "TABLE") {
            
            codeblock.parentNode.parentNode.parentNode.parentNode.parentNode.appendChild(copybutton);
        } else {
            
            codeblock.parentNode.appendChild(copybutton);
        }
    });
</script>
</body>

</html>
